os:
- linux
services:
- docker
language: node_js
node_js:
- 6.10.3
jdk:
- oraclejdk8
deploy:
  provider: heroku
  api_key:
    secure: jYv037N1GRS6ru86oM5vUNReUlrI79ruGrmDbZSkoqn+5TUBo0C5hLpIgM7ZaSDoy6b5uQMiupxPYettqSGiA8FQ+DGCm2kMRE1oQeRWzWiBIeCkMuzIvVyLpwua5AAz/kfq5Yz7lHFzUlGrKLAtdxE9m20lUm6BolPjMucnDur2OJ0uZgGSg69D1RWmskeGqDieLRWkmTjsNE8CBHaP1KieVhdCUxn9Q2wGCP8KCt96Uwal4q7J9fGb2vutJvqdOwiSb7+ciotEeXU06rAuSz3aiJN1lYC/jotdb3aQSiHLPEAddz5p0OhSIx9TKe3xsW/pMatqfxBKRTRSSRqhXR/9TeolR8NuWA5P2MxjZJouIMzGcyvQtR458CO3Y5C+/jzZhiRAlq9jWI+5F0An7HI97Dzp56qU8cBxqK2Q7g3GqfCWREe+OMy54r9NOiBMMIWWAkQrzBQRm7IOqN1+xusYW0BjVum6atGT3nzQHvZrzbyfKHNXw0k0Pn+ZR9dqBORSmnktm1UqCpLAK2erLmA1IArJ42jbQZMLW6J3sL4ccUuNangXgUXBuG8GhvMz/SI4t1xG4uNO1q7I3NbQjqgjhENG8iXQh4Q4Y3r9zOVKL8v5NDHxSUp26H2JOp8Dm/dN/KXODbhvdcw/NdtACpTY5SMgrZ+0gMaF3ksJqgs=
 app:
    dev: school-net
sudo: false
cache:
  directories:
  - node
  - node_modules
  - "$HOME/.m2"
  - "$HOME/.yarn-cache"
env:
  global:
  - NODE_VERSION=6.10.3
  - SPRING_OUTPUT_ANSI_ENABLED=ALWAYS
  - SPRING_JPA_SHOW_SQL=false
  - PHANTOMJS_BIN=./node_modules/.bin/phantomjs
  - process.env.PHANTOMJS_BIN = './node_modules/.bin/phantomjs'
before_install:
- jdk_switcher use oraclejdk8
- java -version
- sudo /etc/init.d/mysql stop
- sudo /etc/init.d/postgresql stop
- curl -o- -L https://yarnpkg.com/install.sh | bash
- export PATH=$HOME/.yarn/bin:$PATH
install:
- yarn install
script:
- chmod +x mvnw
- "./mvnw clean test"
- yarn test
- "./mvnw package -Pprod -DskipTests"
notifications:
  webhooks:
    on_success: change
    on_failure: always
    on_start: false
